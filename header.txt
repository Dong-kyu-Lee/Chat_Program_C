// header.h의 내용

#pragma once

#pragma pack(push, 1)
typedef struct PacketHeader {
    uint8_t type;
    uint16_t length; // Length of the data in bytes
} PacketHeader;
#pragma pack(pop)

typedef enum PacketType {
	TYPE_TEXT = 0, // Data : message string
	TYPE_NICK = 1, // Data : new nickname string
    TYPE_ROOMS = 2,
	TYPE_CREATE = 3, // Data : room name string
	TYPE_JOIN = 4, // Data : room name string
    TYPE_LEAVE = 5,
	TYPE_USERS = 6, // Data : list of users in the room
	TYPE_FRIENDS = 7, // Data : list of friends
    TYPE_CHANGE = 8,
    TYPE_KICK = 9, // Data : nickname of the user to kick
    TYPE_ADD_FRIEND = 10, // Data : nickname of the user to add
	TYPE_REMOVE_FRIEND = 11, // Data : nickname of the user to remove
    TYPE_HELP = 12,
	TYPE_ERROR = 13, // Data : error message string
} PacketType;

typedef struct Client {
    int sock;
    char nick[64];
    pthread_t thread;
    struct Room* room;
    struct Client* next;
    struct Client* prev;
    struct Client* room_next;
    struct Client* room_prev;
    int friend_count; // Number of friends
	struct Client* friend_list[20]; // List of friends
} Client;

typedef struct Room {
    char name[64];
    unsigned int id; // Unique ID for the room
    struct Client* members;
    int member_count;
    struct Room* next;
    struct Room* prev;
    struct Client* owner; // owner of the room
} Room;
